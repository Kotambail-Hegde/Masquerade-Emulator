# So, what's masquerade ?

A multi-system emulator supporting classic gaming consoles and simulators.

[![Web Version](https://img.shields.io/badge/web-online-blue?style=flat-square)](https://kotambail-hegde.github.io/Masquerade-Emulator/hosting/)
[![Releases](https://img.shields.io/badge/download-releases-green?style=flat-square)](https://github.com/Kotambail-Hegde/Masquerade-Emulator/releases)

---

## Supported Systems

- **Game Boy Advance (GBA)**
- **Game Boy Color (GBC)**
- **Game Boy (GB)**
- **Nintendo Entertainment System (NES)**
- **Ms Pac-Man**
- **Pac-Man** (Midway and Namco variants)
- **Space Invaders**
- **CHIP-8**
- **S-CHIP**
- **XO-CHIP**
- **Game of Life**

---

## Getting Started

### Quick Access

- **[Try Web Version](https://kotambail-hegde.github.io/Masquerade-Emulator/hosting/)** - Play directly in your browser
- **[Download Desktop Build](https://github.com/Kotambail-Hegde/Masquerade-Emulator/releases)** - Available for Windows

---

## Gameplay Gallery

### P0052: ImGui + SDL3 + OpenGL3 (Recommended)

#### User Interface

<img width="240" height="160" alt="UI Screenshot 1" src="https://github.com/user-attachments/assets/f7af5623-f801-4d18-bcda-f18f7470454f" /> <img width="240" height="160" alt="UI Screenshot 2" src="https://github.com/user-attachments/assets/115f97b2-5858-4e2c-80b9-f6ba3049aa4a" />

#### Pokémon Crystal, Pokémon Emerald and Pokémon Blue

<img width="200" alt="Pokemon Crystal" src="https://github.com/user-attachments/assets/3011b49f-45c6-4f18-bbc5-6ede797e81ad" /> <img width="200" alt="Pokemon Emerald" src="https://github.com/user-attachments/assets/d668bc27-9589-4897-bc92-8e1ca14c5d7b" /> <img width="200" alt="Pokemon Blue" src="https://github.com/user-attachments/assets/3fa02907-9902-4b73-a75a-af8e74df8ef6" />

### P0010: OLC (Deprecated)

#### User Interface

<img width="240" height="160" alt="OLC UI" src="https://github.com/user-attachments/assets/331178df-2d66-4fba-8d10-dc5c186acb86" />

#### Pokémon Ruby, Emerald, and Sapphire

<img width="200" alt="Pokemon Ruby" src="https://github.com/user-attachments/assets/4d50ea26-2368-46ea-8753-53c470a056d4" /> <img width="200" alt="Pokemon Emerald" src="https://github.com/user-attachments/assets/511e90e0-aa1b-491c-9937-40c9d1e57ee6" /> <img width="200" alt="Pokemon Sapphire" src="https://github.com/user-attachments/assets/8b5a58cb-d602-4b47-9fc9-833e36f6737a" />

#### Game Boy Advance - Pokémon Fire Red and Leaf Green

<img width="200" alt="Pokemon Fire Red" src="https://github.com/user-attachments/assets/c1d64f3a-ff2e-4b36-9adf-612df56e178e" /> <img width="200" alt="Pokemon Leaf Green" src="https://github.com/user-attachments/assets/471c901a-b278-406b-8b99-41bdb4787188" />

#### Game Boy Color - Donkey Kong Country and Pokémon Crystal

<img width="200" alt="Donkey Kong Country" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/3d6bfb58-ae88-4b66-b299-ef20faf67112" /> <img width="200" alt="Pokemon Crystal" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/3b318907-dc70-4488-8552-729b98504603" />

#### Game Boy - Multiple Palette Examples

*Prehistorik Man in BGB Palette, Pinball Deluxe in Gearboy Palette and Altered Space in Sameboy Palette*

<img width="200" alt="Prehistorik Man" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/8819c689-b3ad-444e-bece-d43a993e05b7" /> <img width="200" alt="Pinball Deluxe" src="https://github.com/user-attachments/assets/85f488ce-09e3-4624-b98f-73de539d051c" /> <img width="200" alt="Altered Space" src="https://github.com/user-attachments/assets/b6c38587-8d40-4f41-ab1a-e921194ebf53" />

#### Nintendo Entertainment System - Super Mario Bros 3 and Zelda II

<img width="200" alt="Super Mario Bros 3" src="https://github.com/user-attachments/assets/ddd2fc8c-bd61-4ed2-b8f3-0bacdcd08987" /> <img width="200" alt="Zelda II" src="https://github.com/user-attachments/assets/fd9da1bc-8ecb-4922-95fb-512b984cfabd" />

#### Nintendo Entertainment System - Super Mario Bros and Kong Classic

<img width="200" alt="Super Mario Bros" src="https://github.com/user-attachments/assets/0d7448a5-e353-46e1-8635-6d37cce576d8" /> <img width="200" alt="Kong Classic" src="https://github.com/user-attachments/assets/42b79a0a-b867-4734-88de-dd9efe273193" />

#### Pac-Man

<img width="200" alt="Pac-Man" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/81b421c4-bb53-4985-ae15-90d8dd572b5a" />

#### Ms Pac-Man

<img width="200" alt="Ms Pac-Man" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/b55f29d8-fcfb-4d5b-b30c-fb9b8afe0e35" />

#### Space Invaders

<img width="200" alt="Space Invaders" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/afac2f45-75e0-4a24-b087-1499360cf703" />

#### CHIP-8 - Pong

<img width="200" alt="CHIP-8 Pong" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/f162afa0-733e-4d4f-8fdf-7a907cb878e2" />

#### Game of Life - Toroidal Mode

<img width="350" alt="Game of Life" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/44bd5adf-bbe5-4edc-a47a-eff03cc8faae" />

---

## Detailed System Information

### Game Boy Advance (GBA)

#### Features
- Supports GBA BIOS
- Comprehensive PPU implementation
- Flash memory emulation
- Accurate open-bus behavior
- Full VRAM, OAM, Palette mirroring behavior
- DMA, timers, interrupts closely match hardware
- Sprite mosaic, blending, windowing supported
- BIOS SWI implementation with correct edge cases
- VRAM prefetch behavior partially implemented

#### Test Results
- Passes jsmolka/alyosha-tas arm.gba, thumb.gba, memory.gba, flash and PPU tests
- Passes FuzzARM.gba
- Passes all tonc test suite tests
- Passes all belogic audio tests
- Passes most AGS suite tests (exceptions: PREFETCH BUFFER, WAIT STATE WAIT CONTROL, CARTRIDGE RAM WAIT CONTROL, TIMER PRESCALER 0)
- Passes most mgba-suite tests (exceptions: Timing, Timer Count-Up, Timer IRQ, DMA, SIO, MISC Edge Case tests)
- Passes CowBite GBA tests except prefetch and some DMA timing tests
- Passes gba-tests by denier123 (except pipeline hazard cases)
- Passes LCD controller tests except FIFO stall patterns

#### Known Issues
- Unable to play some video ROMs (e.g., Dragon Ball GT)
- Minor visual artifacts in Mode 3 for certain video ROMs
- Some audio artifacts present (fix planned for P0152 variant)
- Performance optimization ongoing (targeted for P0152 variant)
- Cycle-exact CPU timing under review
- Some DMA edge-case timings not fully accurate
- SIO not yet cycle-accurate
- Cache/pipeline prefetch behavior incomplete

---

### Game Boy / Game Boy Color (GB/GBC)

#### Features
- GB and GBC BIOS support
- Pixel-Fetcher/Pixel-FIFO implementation
- GBC supports GB mode
- Multiple palette support for GB
- Color correction for GBC to match actual hardware
- GameGenie and GameShark cheat support
- BESS specification support for save/load states
- GBVideoPlayer2 video ROM support with audio
- Accurate OAM DMA timing (HDMA and GDMA)
- STAT interrupt timing matches hardware closely
- Accurate open-bus behavior
- Mid-scanline palette change support
- All GBC VRAM bank behaviors implemented

#### Supported Memory Bank Controllers
- NO MBC
- MBC1, MBC2, MBC3, MBC5, MBC30
- Partial support for HuC1 and HuC3 (RTC not fully implemented)
- Supports multicarts with MBC5 variants

#### Test Results
- Completely passes Tom Harte's SingleStepTests (official and unofficial opcodes) for SM83
- Passes all Blargg test suite except oam_bug.gb
- Passes all Mooneye tests except boot_div-dmgABCmgb.gb and boot_hwio-dmgABCmgb.gb
- Passes DMG Aging Cartridge test
- Passes ax6's rtc3test suite
- Passes TurtleTests and MagenTests
- Passes mbc3-tester
- Passes PeachyHardwareAbuse tests including ctf.gb
- Able to play demo scenes including oh.gb, 20y.gb, pocket.gb, and demotronic.gbc
- APU plays ISSOtm's smooth-player.gb
- Passes dmg-acid2 (DMG and CGB)
- Passes CGB acid2 (except minor palette drift)
- Passes CGB timing suite except STAT mode-change race
- Passes MemTiming tests except OAM bug variants

#### Known Issues
- Fails MMIO_exec_1.gb
- Some Mealybug Tearoom tests fail by single pixel offset
- Fails cgb-acid-hell
- Fails many docboy-test-suite APU and CGB tests
- Multiple age-test-roms failures
- Link Cable not yet supported
- Some CGB-specific quirks remain unimplemented
- APU tests still failing from same-suite
- Minor sprite-priority race conditions remain
- Some HDMA timing edge cases inaccurate
- BOOT ROM disable edge case not exact
- OAM corruption behavior not fully cycle-accurate

---

### Nintendo Entertainment System (NES)

#### Features
- Zapper support in Port 2 (using mouse clicks)
- GameGenie cheat support
- Comprehensive mapper support
- Accurate PPU address bus behavior (open bus, palette mirroring)
- Correct sprite overflow and sprite-0 hit timing
- APU frame counter supports both modes (4-step, 5-step)
- DMC DMA behavior partially cycle accurate
- CPU/PPU alignment (pre-render offset) correct

#### Supported Mappers
- NROM
- MMC1 (with variants: SEROM, SHROM, SH1ROM, SuROM)
- UxROM (002)
- CNROM
- MMC3
- AxROM
- GxROM
- Nanjian FC-001 (Mapper 163)
- ANROM variants
- GNROM
- UNROM clones (180/181)
- Partial support for MMC2/MMC4 (latch timing WIP)

#### Test Results
- 6502 passes Klaus Dormann's 6502_65C02_functional_tests including BCD tests
- Passes Nestest (official and unofficial opcodes)
- Completely passes Tom Harte's SingleStepTests for NES6502
- Passes all Blargg CPU tests (official and unofficial opcodes)
- Passes all Blargg CPU timing tests
- Passes all Blargg CPU dummy read/write tests
- Passes all CPU tests mentioned in NES Dev Wiki
- Passes blargg_ppu_tests_2005.09.15b
- Passes blargg_apu_2005.07.30
- Passes Blargg's sprite_overflow_test suite
- Passes Blargg's sprite_hit_tests_2005.10.05
- Passes all APU tests including DMC tests
- Passes Blargg's vbl_nmi_timing and ppu_vbl_nmi tests
- Passes Blargg's cpu_interrupt_v2 tests
- Passes OAM stress tests
- Passes Blargg's and Bisqwit's ppu_open_bus tests
- Passes Bisqwit's cpu_exec_space tests
- Passes most Blargg's mmc3_irq_tests (exception: 4-scanline_timing.nes)
- Passes unofficial instructions behavior tests
- Passes reset/irq/nmi timing test ROMs except MMC3 race cases

#### Known Issues
- Unable to boot Dragon Warrior III
- DMC DMA obscure timing quirks need proper emulation
- MMC3 scanline counter not perfectly accurate for some pirate carts
- Some PAL timing edge cases remain
- MMC5 not yet supported
- Lightgun inaccuracy on high-refresh monitors

---

### Pac-Man and Ms Pac-Man

#### Features
- Z80 CPU emulation
- Support for both Midway and Namco variants
- Accurate color PROM decoding
- Accurate maze redraw timing
- Sound emulation (Namco WSG) partially implemented
- Cocktail mode supported

#### Test Results
- Passes Tom Harte's SingleStepTests for Z80
- Passes zexdoc and zexall tests
- Passes Pac-Man hardware test benches
- Verified correct maze timings, blinking, sprite priority

#### Supported Pac-Man Boot-legs
- Hangly Man
- Uniprom Variant
- Baracuda
- NewPuc
- After Dark
- Snatcher Set 1 and 2
- MsPacAttack
- Bobbypac
- Corkscrew
- VoidPac

#### Future Support
Planned support for additional boot-legs: Streaking, Titan, Caterpillar, Abscam, Joyman, Piranha, Galaxian Hardware Variant, MsPacPlus, MsPacAttackNew, MsPacAtackOld

---

### Space Invaders

#### Features
- Color overlay support
- 8080 CPU emulation
- Accurate shift register emulation
- Correct input port timing

#### Test Results
- Passes extensive suite of 8080 test ROMs (official and unofficial opcodes)
- Passes Space Invaders diagnostic ROM
- Passes all 8080 flag-behavior edge-case tests

---

### CHIP-8 / S-CHIP / XO-CHIP

#### Supported Variants
- CHIP-8
- S-CHIP (Legacy and Modern)
- XO-CHIP (with audio support and up to 4 planes)

#### Features
- ROM database for auto-detection of:
  - Variants
  - Quirks
  - Recommended palettes
  - Recommended keybindings
  - Recommended execution rate
- Correct SCHIP clipping and scroll quirks
- XO-CHIP extended pitch and waveform support

#### Test Results
- Completely passes Timendus's chip8-test-suite v4.2
- Completely passes CubeChip test suite
- Passes SCHIP and XO-CHIP extended graphics tests
- Passes audio timing tests for XO-CHIP

---

### Game of Life

#### Supported Modes
- Normal Mode
- Toroidal Mode

#### Planned Features
- Normal Mode with Pan/Zoom support
- Save/load board state
- Custom rule support (Life-like, Generations)

---

### Additional CPU Test Coverage

- **8080**: Passes extensive test ROM suite (official and unofficial opcodes)
- **Z80**: Passes extensive test ROM suite (official and unofficial opcodes)
- **SM83**: Passes extensive test ROM suite (official and unofficial opcodes)
- **6502**: Passes extensive test ROM suite (official and unofficial opcodes)
- **ARM7TDMI**: Passes ARM/Thumb instruction tests, barrel shifter edge cases

---

## Variants

Masquerade is available in two variants, differing in their underlying libraries:

### P0052: ImGui + SDL3 + OpenGL3 (Recommended)

Modern UI framework with enhanced features and performance.

**Technology Stack:**
- ImGui for interface
- SDL3 for windowing and input
- OpenGL3 for rendering
- nativefiledialog-extended for file dialogs
- Boost libraries for INI parsing

### P0010: OLC (Deprecated)

Legacy variant based on One Lone Coder's Pixel Game Engine.

**Note:** P0010 is no longer supported. Users should migrate to P0052 for latest features and updates.

**Technology Stack (Legacy):**
- Forked version of One Lone Coder's Pixel Game Engine
- One Lone Coder's Sound Wave Engine
- Boost libraries for INI parsing

---

## Automated Test Reports
- Game Boy / Game Boy Color (GB/GBC) : [GB Emulator Shootout](https://kotambail-hegde.github.io/Masquerade-Emulator/tests/gb/GBEmulatorShootout/)

---

## Credits and Acknowledgments

### Documentation and References

#### Game Boy / Game Boy Color
- [GB Pandocs](https://gbdev.io/pandocs/) - Comprehensive Game Boy documentation
- [GB Dev Wiki](https://gbdev.gg8.se/wiki/articles/Memory_Bank_Controllers) - Memory Bank Controller documentation
- [Codeslinger's Blog](http://www.codeslinger.co.uk/pages/projects/gameboy.html) - Game Boy emulation guide
- [Night Shade's Audio Implementation](https://nightshade256.github.io/2021/03/27/gb-sound-emulation.html) - Audio emulation guide
- [The Ultimate Gameboy Talk](https://github.com/drhelius/Gearboy) - Technical reference
- [Antonio's Technical Documentation](https://github.com/AntonioND/giibiiadvance/blob/master/docs/TCAGBD.pdf) - Game Boy Advance technical guide

#### Game Boy Advance
- [GBATEK](http://problemkaputt.de/gbatek-gba-reference.htm) - Comprehensive GBA reference
- [TONC](https://gbadev.net/tonc/) - GBA programming tutorials
- [NBA HW Docs](https://nba-emu.github.io/hw-docs/) - Hardware documentation
- [GBA Docs](https://gbadev.net/gbadoc/) - GBA development documentation
- [Dillonb's Cartridge Guide](https://dillonbeliveau.com/2020/06/05/GBA-FLASH.html) - Flash cartridge implementation
- [GBA PPU Access Pattern](https://nba-emu.github.io/hw-docs/ppu/ppu.html) - PPU timing documentation

#### Nintendo Entertainment System
- [NES Dev Wiki](https://www.nesdev.org/wiki/Nesdev_Wiki) - Comprehensive NES documentation

### Reference Emulators

- [Gearboy](https://github.com/drhelius/Gearboy) - GB/GBC reference and testing
- [gbmulator](https://github.com/mpostaire/gbmulator) - GB/GBC testing
- [NBA](https://github.com/nba-emu/NanoBoyAdvance) - GBA reference and testing
- [SkyEmu](https://github.com/skylersaleh/SkyEmu) - GBA testing and UI theme inspiration
- [Dillonb's GBA Emulator](https://github.com/Dillonb/gba/) - CLI logger/debugger inspiration

### Test Suites and Test ROMs

- Blargg test ROMs for GB, GBC, and NES
- jsmolka and alyosha-tas test ROMs for GBA
- [AGS Test Suite](https://github.com/DenSinH/AGSTests/tree/main) by DenSinH - GBA test ROMs
- Tom Harte's SingleStepTests for 6502 and SM83 CPU testing

### Community

- [Emulator Development Discord](https://discord.com/invite/emudev) - Active community support and development discussions

---

## License

See the repository for license information.

---

**[Web Version](https://kotambail-hegde.github.io/Masquerade-Emulator/hosting/)** | **[Downloads](https://github.com/Kotambail-Hegde/Masquerade-Emulator/releases)** | **[Report Issues](https://github.com/Kotambail-Hegde/Masquerade-Emulator/issues)**
